{% extends 'base.html.twig' %}

{% block title %}Hello MainPageController!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
    <h1>Hello {{ controller_name }}! ✅</h1>


    {#}
    {% if app.session.flashbag.peek('success')|length > 0 %}
        <h1>MEC, tu as un message de succès</h1>
    {% endif %}
    #}

    {% if app.user %}
        <p>hello {{ app.user.email }}</p>

    {% endif %}

    This friendly message is coming from:
    <ul>
        <li>Your controller at <code><a href="{{ 'D:/Serveur/www/HappyBizTrip/src/Controller/MainPageController.php'|file_link(0) }}">src/Controller/MainPageController.php</a></code></li>
        <li>Your template at <code><a href="{{ 'D:/Serveur/www/HappyBizTrip/templates/main_page/index.html.twig'|file_link(0) }}">templates/main_page/index.html.twig</a></code></li>
    </ul>
</div>
{% endblock %}
{% block javascripts %}
    {% if (app.session.flashbag.peek('success')|length >0) or (app.session.flashbag.peek('error')|length >0) %}
        {{ parent() }}
        <script>
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": false,
                "progressBar": true,
                "positionClass": "toast-top-left",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "slideUp",
                'escapeHtml': true
            }
        </script>
        {% for label, messages in app.flashes(['success', 'error']) %}
            {% for message in messages %}    
                <script>toastr["{{ label }}"]("{{ message|trans }}")</script>
            {% endfor %}
        {% endfor %}
    {% endif %}
{% endblock %}
