{% extends 'base.html.twig' %}

{% block title %}Hello SearchController!{% endblock %}

{% block stylesheets %}
    {{ parent() }}    
    {{ encore_entry_link_tags('css/search') }}
{% endblock %}

{% block body %}
<div class="container">
    <div class="row pt-4">
        <div class="col">
            <span class="text-result float-left">{{ resultSearch|length }} résultats trouvés</span>
        </div>
        <div class="col">
            <span class="text-advanced-search float-right" id="btnAdvancedSearch">Recherche Avancée <i id="iconAdvancedSearch" class="fas fa-caret-down"></i></span>
        </div>
    </div>
    <hr>
    <div class="d-flex justify-content-center pt-1">
        <div class="card" id="advancedSearch" style="display:none;">
            <div class="card-body">
                Formulaire de recherche avancée
            </div>
        </div>
    </div>
    <div class="d-flex justify-content-center pt-2">
    <div class="card">
        <div class="card-body">
            {% for result in resultSearch %}
                <div class="row mb-3 mt-3">
                    <div class="col-7 col-md-8">
                        <div class="media position-relative">
                            <img src=
                                    {% if result.avatar is empty %}
                                    "{{ asset('img/library/defaultAvatar.png') }}"
                                    {% elseif result.avatar starts with 'https:' %}
                                    "{{ result.avatar }}"
                                    {% else %}
                                    "{{ asset('/uploads/avatars/' ~ result.avatar) }}"
                                    {% endif %}
                            class="avatar avatar-media mr-3 my-auto" alt="{{ 'alt.avatar'|trans|raw }} {{ result.pseudo }}">
                            <div class="media-body">
                                <p class="col-text-pseudo mt-0">{{result.pseudo }}</p>
                                <p class="col-text-profile">{{ result.firstName }}  {{ result.lastName }}</p>
                                <p class="col-text-profile">Grenoble, France</p>
                                <a href="{{ path('show_profile', {'slug':result.slug}) }}" class="stretched-link"></a>
                            </div>
                        </div>
                    </div>
                    <div class="col-5 col-md-4 text-right my-auto">
                        <button type="button" class="btn btn-outline-happyDarkBlue btn-sm">Se connecter</button>
                    </div>
                </div>
                <hr>
            {% endfor %}
        </div>
        <nav aria-label="Page navigation example">
            <ul class="pagination pagination-sm justify-content-center">
                <li class="page-item disabled">
                <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Previous</a>
                </li>
                <li class="page-item active" aria-current="page">
                    <span class="page-link">
                        1
                        <span class="sr-only">(current)</span>
                    </span>
                </li>
                <li class="page-item"><a class="page-link" href="#">2</a></li>
                <li class="page-item"><a class="page-link" href="#">3</a></li>
                <li class="page-item">
                <a class="page-link" href="#">Next</a>
                </li>
            </ul>
        </nav>
    </div>
    </div>

</div>

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        // position of footer for screen >=768 px
        $(function () {
            if ($(window).width() >= 768) {
                var bht = $('body').height()
                var wht = $(window).height()
                if (bht < wht) {
                    $('footer').css("position", "absolute")
                }
            }
        })
    
        // advanced search form visible or not
        document.getElementById("btnAdvancedSearch").addEventListener("click", function(){
            document.getElementById("advancedSearch").style.display
            if ( document.getElementById("advancedSearch").style.display === "none") {
                $("#advancedSearch").show("slow")
                document.getElementById("iconAdvancedSearch").className = "fas fa-caret-up"
                document.getElementById("advancedSearch").style.display = "inline"
            }
            else {
                $("#advancedSearch").hide("slow")
                document.getElementById("iconAdvancedSearch").className = "fas fa-caret-down"
                document.getElementById("advancedSearch").style.display = "none"
            }
        })
    </script>
{% endblock %}
